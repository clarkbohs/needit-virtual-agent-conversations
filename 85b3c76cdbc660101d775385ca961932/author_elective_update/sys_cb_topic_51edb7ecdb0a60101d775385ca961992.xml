<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_topic">
    <sys_cb_topic action="DELETE">
        <applicability/>
        <applicability_mode>query</applicability_mode>
        <auto_resolution_enabled>false</auto_resolution_enabled>
        <category>3efd22da0b203300a1b16c2367673a10</category>
        <channels/>
        <connect_queue/>
        <description>ITSM conversation flow to check status of incidents and requested items.</description>
        <flexible_conversation_switching>false</flexible_conversation_switching>
        <graph>{"graph_api_version":"1.0.31","variables":{"b52bca8ded0e49fd9037b5a9f8969b1e":{"id":"b52bca8ded0e49fd9037b5a9f8969b1e","name":"get_record","label":"Get Record","varType":"reference","table":"sc_req_item","category":"vaInputs"},"530ef78d4f4c41e1bc620e8c43f2bdf0":{"id":"530ef78d4f4c41e1bc620e8c43f2bdf0","name":"incident_or_requested_item","label":"Incident Or Requested Item","varType":"choice","choices":[{"label":"Incident","value":"incident"},{"label":"Requested Item ","value":"sc_req_item"}],"category":"vaInputs"},"45e4d90b4ca04474bf4745dfd7a6ba72":{"id":"45e4d90b4ca04474bf4745dfd7a6ba72","name":"add_comment","label":"Add Comment","varType":"boolean","category":"vaInputs"},"eb18fa5bb6dd4171be1831c5c7de0c78":{"id":"eb18fa5bb6dd4171be1831c5c7de0c78","name":"comment","label":"Comment","varType":"string","category":"vaInputs","secure":false,"encryptionSalt":{"value":"MTYxMTc5NjIwNTAwNSBWQSBEZXNpZ25lciBpcyBhd2Vzb21l","mode":"simple"},"encryptionHashFunction":"SHA-256"},"b42c987f10254ab1992353a1952ed44d":{"id":"b42c987f10254ab1992353a1952ed44d","value":{"mode":"simple","value":"0"},"name":"index","label":"index","varType":"script","category":"vaVars"},"a0a219c20dd648609a7379de6eacbd2a":{"id":"a0a219c20dd648609a7379de6eacbd2a","value":{"mode":"simple","value":"5"},"name":"limit","label":"limit","varType":"script","category":"vaVars"},"77e1430e8ae54995add8c92d1578d83d":{"id":"77e1430e8ae54995add8c92d1578d83d","value":{"mode":"simple","value":"0"},"name":"incident_count","label":"incident_count","varType":"script","category":"vaVars"},"77eb8ca1de3e49fca6bc37d7b49b2eeb":{"id":"77eb8ca1de3e49fca6bc37d7b49b2eeb","value":{"mode":"simple","value":"0"},"name":"requested_item_count","label":"requested_item_count","varType":"script","category":"vaVars"},"dbec2ac52b6144598b05746347a3a3bb":{"id":"dbec2ac52b6144598b05746347a3a3bb","value":{"mode":"script","value":"(function execute() {\n    return gs.getProperty('sn_itsm_va.com.snc.itsm.virtualagent.portal_url', 'sp');\n})()\n"},"name":"service_portal_base_url","label":"service_portal_base_url","varType":"script","category":"vaVars"},"7b1771c382304cadae4a3aa95a114e0d":{"id":"7b1771c382304cadae4a3aa95a114e0d","value":{"mode":"script","value":"(function execute() {\n    return gs.getProperty('glide.servlet.uri') + '/';\n})()\n"},"name":"base_url","label":"base_url","varType":"script","category":"vaVars"},"38458459b9fc464eba8a9cc0da93b572":{"id":"38458459b9fc464eba8a9cc0da93b572","name":"LiveAgent_application","value":{"mode":"simple","value":"itsm"},"varType":"script","label":"LiveAgent_application","category":"vaVars"},"5d085c415cbd49bc8295be6a60095208":{"id":"5d085c415cbd49bc8295be6a60095208","value":{"value":"","mode":"simple"},"name":"table_name","label":"table_name","varType":"script","category":"vaVars"},"25c473d4f9e2470cb2ca6dfd0a322b49":{"id":"25c473d4f9e2470cb2ca6dfd0a322b49","value":{"mode":"simple","value":"0"},"name":"count","label":"count","varType":"script","category":"vaVars"},"bebac1df4d754177bc12f77fdafd2146":{"id":"bebac1df4d754177bc12f77fdafd2146","value":{"value":"","mode":"simple"},"name":"sys_id","label":"sys_id","varType":"script","category":"vaVars"},"8a338bdac737486eb625a78e7b71bc59":{"category":"vaInputs","id":"8a338bdac737486eb625a78e7b71bc59","label":"User","name":"user","table":"sys_user","varType":"reference"}},"goals":{"primary":{"id":"primary","trigger":{"type":"primary"},"name":"primary","applicability":"","description":"","nodes":{"eaadb07035ce412795a9cee3b8ed09d3":{"id":"eaadb07035ce412795a9cee3b8ed09d3","stepType":"Start","name":"Start","greetingResponse":{"mode":"simple","value":""},"applicability":{"mode":"query","value":""}},"ce6e898ac8244c04991b300e7d494ba8":{"id":"ce6e898ac8244c04991b300e7d494ba8","stepType":"TerminateGoal","name":"End","confirmationMessage":{"value":"","mode":"simple"},"applicability":{"mode":"query","value":""}},"78e72913f7a64accacbb1535067eb783":{"id":"78e72913f7a64accacbb1535067eb783","name":"Check Incidents and Requested Items","script":"(function execute() {\n    /*\n        Determining whether there are,\n        1. Active incidents opened by the current user\n        2. Active Requested items requested for the current user\n        and assigning the corresponding script variables.\n    */\n\n    // Setting the incident count\n    var incidents = new GlideAggregate('incident');\n    incidents.addQuery('active', true);\n    incidents.addQuery('caller_id', vaInputs.user);\n    incidents.addAggregate('COUNT');\n    incidents.query();\n    var incidentCount = 0;\n    if (incidents.next())\n        incidentCount = incidents.getAggregate('COUNT');\n        \n    vaVars.incident_count = incidentCount;\n\n    // Setting the requested items count\n    var reqItems = new GlideAggregate('sc_req_item');\n    reqItems.addQuery('active', true);\n    reqItems.addQuery('request.requested_for', vaInputs.user);\n    reqItems.addAggregate('COUNT');\n    reqItems.query();\n    var reqItemsCount = 0;\n    if (reqItems.next())\n        reqItemsCount = reqItems.getAggregate('COUNT');\n\n    vaVars.requested_item_count = reqItemsCount;\n})()\n","stepType":"ScriptAction","applicability":{"mode":"query","value":""}},"8e5bc29adf8f4902bfaa04d9644f1dff":{"id":"8e5bc29adf8f4902bfaa04d9644f1dff","stepType":"Decision","name":"Records  Decision","applicability":{"mode":"query","value":""}},"e1282008e57441dc925b089793b7090d":{"stepType":"ReferenceChoicePrompt","name":"Get Record","prompt":{"value":"(function execute() {\n    if (vaVars.table_name == 'incident') {\n        if (parseInt(vaVars.incident_count) &gt; parseInt(vaVars.limit)) \n            return gs.getMessage('You have {0} incidents:', vaVars.incident_count);\n        else\n            return gs.getMessage('Here are your incidents:');\n    }\n\n    if (parseInt(vaVars.requested_item_count) &gt; parseInt(vaVars.limit)) \n        return gs.getMessage('You have {0} requested items:', vaVars.requested_item_count);\n    return gs.getMessage('Here are your requested items:');\n})()\n","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"query","value":""},"optional":false,"defaultValue":{"value":"","mode":"simple"},"variableId":"b52bca8ded0e49fd9037b5a9f8969b1e","id":"e1282008e57441dc925b089793b7090d","mode":"external","script":"(function execute() {\n    /*\n        1. Query the requested items table and get all the active items requested_for the user\n        2. Show the recently updated 5(limit) requested items, apply pagination if there are more than 5.\n    */\n\n\n    var count = 0;\n\n    var options = [];    \n    var gr = new GlideRecord(vaVars.table_name);\n    gr.addActiveQuery();\n    if (vaVars.table_name == 'incident')\n        gr.addQuery('caller_id', vaInputs.user);\n    else \n        gr.addQuery('request.requested_for', vaInputs.user);\n\n    gr.orderByDesc('sys_updated_on');\n    gr.query();\n\n    count = gr.getRowCount();\n    vaVars.count = count;\n    var cnt = 0;\n\n    while(gr.next()) {\n        if (gr.canRead()) {\n            if (vaVars.table_name == 'incident')\n                options.push({ 'value': gr.getUniqueValue(), 'label': gr.getDisplayValue('short_description') + ' [' + gr.getValue('number') + ']'});\n            else\n                options.push({ 'value': gr.getUniqueValue(), 'label': gr.getDisplayValue('cat_item')  + ' [' + gr.getValue('number') + ']'});\n            cnt++;\n        } \n    }\n\n        \n    return options;\n})()","noRecordsResponseMsg":{"mode":"simple","value":[{"type":"paragraph","children":[{"text":""},{"text":"No Records Found"},{"text":""}]}]},"condition":{"value":"(function execute() {\n    /*\n        1. Query the requested items table and get all the active items requested_for the user\n        2. Show the recently updated 5(limit) requested items, apply pagination if there are more than 5.\n    */\n\n\n    var count = 0;\n\n    var options = [];    \n    var gr = new GlideRecord(vaVars.table_name);\n    gr.addActiveQuery();\n    if (vaVars.table_name == 'incident')\n        gr.addQuery('caller_id', vaInputs.user);\n    else \n        gr.addQuery('request.requested_for', vaInputs.user);\n\n    gr.orderByDesc('sys_updated_on');\n    gr.query();\n\n    count = gr.getRowCount();\n    vaVars.count = count;\n    var cnt = 0;\n\n    while(gr.next()) {\n        if (gr.canRead()) {\n            if (vaVars.table_name == 'incident')\n                options.push({ 'value': gr.getUniqueValue(), 'label': gr.getDisplayValue('short_description') + ' [' + gr.getValue('number') + ']'});\n            else\n                options.push({ 'value': gr.getUniqueValue(), 'label': gr.getDisplayValue('cat_item')  + ' [' + gr.getValue('number') + ']'});\n            cnt++;\n        } \n    }\n\n        \n    return options;\n})()","mode":"external_script"},"table":"sc_req_item","withNluUserInput":true,"skipIfFulfilled":true,"entity":{"id":""},"skippable":{"value":"","mode":"query"},"metadataScript":""},"df326c1d80974ffbb2bf7a4c2c56bdc2":{"stepType":"ChoicePrompt","name":"Incident or Requested Item","prompt":{"value":"(function execute() {\n    var output = '';\n    var incidents = '';\n    var items = '';\n\n    if (vaVars.incident_count != 1) {\n            incidents = gs.getMessage('{0} open incidents',vaVars.incident_count);\n    } else {\n            incidents = gs.getMessage('{0} open incident', vaVars.incident_count);\n    }\n\n    if (vaVars.requested_item_count != 1) {\n            items = gs.getMessage('{0} requested items', vaVars.requested_item_count);\n    } else {\n            items = gs.getMessage('{0} requested item', vaVars.requested_item_count);\n    }\n\n    return gs.getMessage('I just checked and you have {0} and {1}.  Which status would you like to check?', [incidents,items]);\n})()\n","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"query","value":""},"optional":false,"defaultValue":{"value":"","mode":"simple"},"variableId":"530ef78d4f4c41e1bc620e8c43f2bdf0","id":"df326c1d80974ffbb2bf7a4c2c56bdc2","withNluUserInput":true,"skipIfFulfilled":true,"entity":{"id":""},"skippable":{"value":"","mode":"query"}},"715c22072f6f411baa0cf613abae1c8b":{"id":"715c22072f6f411baa0cf613abae1c8b","stepType":"TextOutput","name":"No Incidents or Requested Items","value":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"You have no active incidents or requested items."},{"text":""}]}],"mode":"simple"},"applicability":{"mode":"query","value":""},"secure":false},"544383042f6045b0985d3a4a9293cfb8":{"id":"544383042f6045b0985d3a4a9293cfb8","stepType":"Prompt","name":"Add Comment","prompt":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"Would you like to add a comment?"},{"text":""}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"query","value":""},"optional":false,"defaultValue":{"value":"","mode":"simple"},"variableId":"45e4d90b4ca04474bf4745dfd7a6ba72","withNluUserInput":false,"skipIfFulfilled":false,"entity":{"id":""},"skippable":{"value":"","mode":"query"}},"1288d61d26c7432ca31a0d6de135801d":{"id":"1288d61d26c7432ca31a0d6de135801d","stepType":"Decision","name":"Add Comment Decision","applicability":{"mode":"query","value":""}},"e370d10271d847a596ed3656e4b2f759":{"id":"e370d10271d847a596ed3656e4b2f759","stepType":"Prompt","name":"Comment","prompt":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"Please enter your comment."},{"text":""}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"query","value":""},"optional":false,"defaultValue":{"value":"","mode":"simple"},"variableId":"eb18fa5bb6dd4171be1831c5c7de0c78","withNluUserInput":false,"skipIfFulfilled":false,"entity":{"id":""},"skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"e979ab803cb047629696c6492b4bb140":{"id":"e979ab803cb047629696c6492b4bb140","stepType":"Decision","name":"Count Decision","applicability":{"mode":"query","value":""}},"8f89392a41d94c02ab3d37c235a4cadd":{"id":"8f89392a41d94c02ab3d37c235a4cadd","stepType":"ScriptOutput","name":"Update Record","output_type":"single_part","script":"(function execute() {\n    var response = '';\n    var gr = new GlideRecordSecure(vaVars.table_name);\n    if (gr.get(vaVars.sys_id)) {\n        var comment = vaInputs.comment.getValue().trim();\n        if (comment) {\n            gr.comments = comment;\n            gr.update();\n            if (vaVars.table_name == 'incident')\n                response = gs.getMessage(\"I've updated the incident.\");\n            else\n                response = gs.getMessage(\"I've updated the requested item.\");  \n        } else {\n            response = gs.getMessage(\"OK, no comment will be added.\");\n        }\n    } else\n        response = gs.getMessage(\"I couldn't find the record.\");\n\n    return response;\n})()","applicability":{"mode":"query","value":""}},"3015679069124dde9fbae8d2838743d6":{"id":"3015679069124dde9fbae8d2838743d6","stepType":"Decision","name":"Decision","applicability":{"mode":"query","value":""}},"06514cffe9914769bda221176697150d":{"id":"06514cffe9914769bda221176697150d","name":"Set Incident Table","script":"(function execute() {\n    vaVars.table_name = 'incident';\n    vaVars.count = vaVars.incident_count;\n})()\n","stepType":"ScriptAction","applicability":{"mode":"query","value":""}},"d56be27797a54f4db0121d8e9d3ea6a0":{"id":"d56be27797a54f4db0121d8e9d3ea6a0","name":"Set Requested Item table","script":"(function execute() {\n    vaVars.table_name = 'sc_req_item';\n    vaVars.count = vaVars.requested_item_count;\n})()\n","stepType":"ScriptAction","applicability":{"mode":"query","value":""}},"55be471f71ff4dc79375716c85eced43":{"id":"55be471f71ff4dc79375716c85eced43","name":"Set Table","script":"(function execute() {\n    vaVars.table_name = vaInputs.incident_or_requested_item;\n    if (vaVars.table_name == 'incident')\n        vaVars.count = vaVars.incident_count;\n    else \n        vaVars.count = vaVars.requested_item_count;\n})()\n","stepType":"ScriptAction","applicability":{"mode":"query","value":""}},"de4d398ff8df4f608f6c98f16e19ebb9":{"id":"de4d398ff8df4f608f6c98f16e19ebb9","name":"Set Sys Id","script":"(function execute() {\n    vaVars.sys_id = vaInputs.get_record.getValue();\n})()\n","stepType":"ScriptAction","applicability":{"mode":"query","value":""}},"9e8537add828481ea6161558392854fe":{"id":"9e8537add828481ea6161558392854fe","name":"Set Sys Id","script":"(function execute() {\n    // Query the requested item table and get the only requested item\n      var gr = new GlideRecord(vaVars.table_name);\n      gr.addQuery('active', true);\n      if (vaVars.table_name == 'incident')\n            gr.addQuery('caller_id', vaInputs.user);\n      else \n            gr.addQuery('request.requested_for', vaInputs.user);\n\n      gr.setLimit(1);\n      gr.query();\n      if (gr.next()) {\n          vaVars.sys_id = gr.getUniqueValue();\n      }\n})()\n","stepType":"ScriptAction","applicability":{"mode":"query","value":""}},"c3817bff48a747eabbf10b306f647296":{"id":"c3817bff48a747eabbf10b306f647296","stepType":"TextOutput","name":"Before Card","value":{"value":"(function execute() {\n    if (vaVars.table_name == 'incident') {\n        if (parseInt(vaVars.count) == 1)\n            return gs.getMessage('OK, here is your incident:');\n        return gs.getMessage('Here is your incident:');\n    }\n    if (parseInt(vaVars.count) == 1)\n        return gs.getMessage('OK, here is your requested item:');\n    return gs.getMessage('Here is your requested item:');\n})()\n","mode":"script"},"applicability":{"mode":"query","value":""},"secure":false},"051c0451c61d45bb84d861cd582b0a14":{"id":"051c0451c61d45bb84d861cd582b0a14","stepType":"Decision","name":"Decision","applicability":{"mode":"query","value":""}},"95c5742b844645d48e7565c25e043646":{"id":"95c5742b844645d48e7565c25e043646","stepType":"RecordOutput","name":"Incident card","variableId":"","mode":"script","tableName":"incident","fields":["short_description","state","assigned_to","sys_updated_on","comments"],"applicability":{"value":"","mode":"query"},"condition":{"mode":"glide_query","value":"sys_id={{vaVars.sys_id}}"},"cardTemplate":"General","cardFields":{},"cardDefinition":{}},"eb397458960a4f6eae64d999dda8d61c":{"id":"eb397458960a4f6eae64d999dda8d61c","stepType":"RecordOutput","name":"Requested Item card","variableId":"","mode":"script","tableName":"sc_req_item","fields":["cat_item","state","assigned_to","sys_updated_on","comments"],"applicability":{"value":"","mode":"query"},"condition":{"mode":"glide_query","value":"sys_id={{vaVars.sys_id}}"},"cardTemplate":"General","cardFields":{},"cardDefinition":{}}},"edges":[{"id":"e2ac5e92a28a4e23866f3e5d8170657f","edgeType":"Edge","source":"e1282008e57441dc925b089793b7090d","target":"de4d398ff8df4f608f6c98f16e19ebb9","sourcePort":"","targetPort":""},{"id":"e51b22575dc740de8d9e40e5a0cebadc","edgeType":"Edge","source":"95c5742b844645d48e7565c25e043646","target":"544383042f6045b0985d3a4a9293cfb8","sourcePort":"","targetPort":""},{"id":"be9c001cfe7540d389c75d9412be4530","edgeType":"Branch","source":"1288d61d26c7432ca31a0d6de135801d","target":"ce6e898ac8244c04991b300e7d494ba8","sourcePort":"","targetPort":"","expression":{"mode":"query","value":"add_comment="},"label":"No"},{"id":"1fcc25b454234953b86bcf1f2d3e29e0","edgeType":"Branch","source":"3015679069124dde9fbae8d2838743d6","target":"8e5bc29adf8f4902bfaa04d9644f1dff","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return parseInt(vaVars.incident_count) != 0 || parseInt(vaVars.requested_item_count) != 0;\n})()\n"},"label":"Has Records"},{"id":"d37b2a1beb434e6b9a48aad2d7f617e8","edgeType":"Edge","source":"06514cffe9914769bda221176697150d","target":"e979ab803cb047629696c6492b4bb140","sourcePort":"","targetPort":""},{"id":"d6b226575bfc432ea15b9b5c4d9dfc40","edgeType":"Edge","source":"de4d398ff8df4f608f6c98f16e19ebb9","target":"c3817bff48a747eabbf10b306f647296","sourcePort":"","targetPort":""},{"id":"071683583ad543c68a545e5b4696f487","edgeType":"Edge","source":"55be471f71ff4dc79375716c85eced43","target":"e979ab803cb047629696c6492b4bb140","sourcePort":"","targetPort":""},{"id":"0d96dab9836d4e5a958f242ea5056a7d","edgeType":"Edge","source":"8f89392a41d94c02ab3d37c235a4cadd","target":"ce6e898ac8244c04991b300e7d494ba8","sourcePort":"","targetPort":""},{"id":"aaa7e90d70e649108587e241875ac7cd","edgeType":"Edge","source":"eaadb07035ce412795a9cee3b8ed09d3","target":"78e72913f7a64accacbb1535067eb783","sourcePort":"","targetPort":""},{"id":"156965d5be6a42a399da3408899136b5","edgeType":"Branch","source":"8e5bc29adf8f4902bfaa04d9644f1dff","target":"df326c1d80974ffbb2bf7a4c2c56bdc2","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.incident_count != 0 &amp;&amp; vaVars.requested_item_count != 0;\n})()"},"label":"Both Incidents and Requested Items"},{"id":"b24e0aed991745e6b9ac38f17e891d21","edgeType":"Edge","source":"715c22072f6f411baa0cf613abae1c8b","target":"ce6e898ac8244c04991b300e7d494ba8","sourcePort":"","targetPort":""},{"id":"eaec7834d7b448c0bc9f0ec8e1624cfd","edgeType":"Edge","source":"544383042f6045b0985d3a4a9293cfb8","target":"1288d61d26c7432ca31a0d6de135801d","sourcePort":"","targetPort":""},{"id":"709e35245ccc43fd8a2e209d666c85c7","edgeType":"Branch","source":"1288d61d26c7432ca31a0d6de135801d","target":"e370d10271d847a596ed3656e4b2f759","sourcePort":"","targetPort":"","expression":{"mode":"query","value":"add_comment=true"},"label":"Yes"},{"id":"9af0eae9df2e4714be122fc35ceac5fd","edgeType":"Branch","source":"e979ab803cb047629696c6492b4bb140","target":"e1282008e57441dc925b089793b7090d","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.count &gt; 1;\n})()"},"label":"Multiple Records"},{"id":"94860887bcee440a8918f60068517262","edgeType":"Edge","source":"e370d10271d847a596ed3656e4b2f759","target":"8f89392a41d94c02ab3d37c235a4cadd","sourcePort":"","targetPort":""},{"id":"a3f30b6c0abc4078862337f57c312777","edgeType":"Edge","source":"78e72913f7a64accacbb1535067eb783","target":"3015679069124dde9fbae8d2838743d6","sourcePort":"","targetPort":""},{"id":"7add209688b54680bf3cb073735fdeac","edgeType":"Branch","source":"3015679069124dde9fbae8d2838743d6","target":"715c22072f6f411baa0cf613abae1c8b","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return parseInt(vaVars.incident_count) == 0 &amp;&amp; parseInt(vaVars.requested_item_count) == 0;\n})()\n"},"label":"Neither Incidents nor Requested Items"},{"id":"16ca74a977bc4fe48fb0556b3515e78a","edgeType":"Branch","source":"8e5bc29adf8f4902bfaa04d9644f1dff","target":"06514cffe9914769bda221176697150d","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return parseInt(vaVars.incident_count) &gt; 0 &amp;&amp; parseInt(vaVars.requested_item_count) == 0;\n})()"},"label":"Incidents only"},{"id":"bd4e2abad10546538dd19c960b47d9bf","edgeType":"Branch","source":"8e5bc29adf8f4902bfaa04d9644f1dff","target":"d56be27797a54f4db0121d8e9d3ea6a0","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return parseInt(vaVars.requested_item_count) &gt; 0 &amp;&amp; parseInt(vaVars.incident_count) == 0;\n})()\n"},"label":"Requested Items Only"},{"id":"dcc586e1bbfa4fe287a10b08aa5bc4a4","edgeType":"Edge","source":"d56be27797a54f4db0121d8e9d3ea6a0","target":"e979ab803cb047629696c6492b4bb140","sourcePort":"","targetPort":""},{"id":"0f73a9cf8e0a46a0bacfa0ca9f17bdfe","edgeType":"Edge","source":"df326c1d80974ffbb2bf7a4c2c56bdc2","target":"55be471f71ff4dc79375716c85eced43","sourcePort":"","targetPort":""},{"id":"d7dc09c175c34628b468f23552d181fc","edgeType":"Branch","source":"e979ab803cb047629696c6492b4bb140","target":"9e8537add828481ea6161558392854fe","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return parseInt(vaVars.count) == 1;\n})()"},"label":"Only One Record"},{"id":"59390d6e73ff4025ae0ab95df67236b1","edgeType":"Edge","source":"9e8537add828481ea6161558392854fe","target":"c3817bff48a747eabbf10b306f647296","sourcePort":"","targetPort":""},{"id":"8983b8235161466da9b4f1c4e22c3ba4","edgeType":"Edge","source":"c3817bff48a747eabbf10b306f647296","target":"051c0451c61d45bb84d861cd582b0a14","sourcePort":"","targetPort":""},{"id":"30e1755d6fc34f459ce9975302e082c6","edgeType":"Branch","source":"051c0451c61d45bb84d861cd582b0a14","target":"95c5742b844645d48e7565c25e043646","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.table_name == 'incident';\n})()\n"},"label":"Incident"},{"id":"3d798a34af144a46b75b00ba9bacc68b","edgeType":"Branch","source":"051c0451c61d45bb84d861cd582b0a14","target":"eb397458960a4f6eae64d999dda8d61c","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.table_name == 'sc_req_item';\n})()\n"},"label":"Requested Item"},{"id":"c8728178ad0f4933ba69a89a75e526d6","edgeType":"Edge","source":"eb397458960a4f6eae64d999dda8d61c","target":"544383042f6045b0985d3a4a9293cfb8","sourcePort":"","targetPort":""}]}}}</graph>
        <key_phrases>Check IT Ticket Status III,Check IT Ticket Status II,ticket status,latest,update,check,status,Request,Requested Item,Incident</key_phrases>
        <library>false</library>
        <live_agent>false</live_agent>
        <name>Check IT Ticket Status III</name>
        <nlu_intent/>
        <nlu_intent_label/>
        <nlu_model/>
        <nlu_model_label/>
        <nlu_provider/>
        <roles/>
        <source_topic_id>edca6f10dbce20101d775385ca9619e4</source_topic_id>
        <sys_class_name>sys_cb_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-01-28 21:12:35</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>51edb7ecdb0a60101d775385ca961992</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Check IT Ticket Status III</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_544290_needit_vi">85b3c76cdbc660101d775385ca961932</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">85b3c76cdbc660101d775385ca961932</sys_scope>
        <sys_update_name>sys_cb_topic_51edb7ecdb0a60101d775385ca961992</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-01-28 21:12:35</sys_updated_on>
        <triggerable_by_notification>false</triggerable_by_notification>
        <type>STANDARD</type>
        <variables/>
    </sys_cb_topic>
    <sys_variable_value action="DELETE" query="document_key=51edb7ecdb0a60101d775385ca961992"/>
    <sys_update_version action="INSERT_OR_UPDATE">
        <action>DELETE</action>
        <application display_value="NeedIt Virtual Agent Conversations">85b3c76cdbc660101d775385ca961932</application>
        <file_path/>
        <instance_id>d10e0751dbe99bc04c1ff70fbf961974</instance_id>
        <instance_name>dev56465</instance_name>
        <name>sys_cb_topic_51edb7ecdb0a60101d775385ca961992</name>
        <payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_topic"><sys_cb_topic action="INSERT_OR_UPDATE"><applicability/><applicability_mode>query</applicability_mode><auto_resolution_enabled>false</auto_resolution_enabled><category>3efd22da0b203300a1b16c2367673a10</category><channels/><connect_queue/><description>ITSM conversation flow to check status of incidents and requested items.</description><flexible_conversation_switching>false</flexible_conversation_switching><graph>{"graph_api_version":"1.0.31","variables":{"b52bca8ded0e49fd9037b5a9f8969b1e":{"id":"b52bca8ded0e49fd9037b5a9f8969b1e","name":"get_record","label":"Get Record","varType":"reference","table":"sc_req_item","category":"vaInputs"},"530ef78d4f4c41e1bc620e8c43f2bdf0":{"id":"530ef78d4f4c41e1bc620e8c43f2bdf0","name":"incident_or_requested_item","label":"Incident Or Requested Item","varType":"choice","choices":[{"label":"Incident","value":"incident"},{"label":"Requested Item ","value":"sc_req_item"}],"category":"vaInputs"},"45e4d90b4ca04474bf4745dfd7a6ba72":{"id":"45e4d90b4ca04474bf4745dfd7a6ba72","name":"add_comment","label":"Add Comment","varType":"boolean","category":"vaInputs"},"eb18fa5bb6dd4171be1831c5c7de0c78":{"id":"eb18fa5bb6dd4171be1831c5c7de0c78","name":"comment","label":"Comment","varType":"string","category":"vaInputs","secure":false,"encryptionSalt":{"value":"MTYxMTc5NjIwNTAwNSBWQSBEZXNpZ25lciBpcyBhd2Vzb21l","mode":"simple"},"encryptionHashFunction":"SHA-256"},"b42c987f10254ab1992353a1952ed44d":{"id":"b42c987f10254ab1992353a1952ed44d","value":{"mode":"simple","value":"0"},"name":"index","label":"index","varType":"script","category":"vaVars"},"a0a219c20dd648609a7379de6eacbd2a":{"id":"a0a219c20dd648609a7379de6eacbd2a","value":{"mode":"simple","value":"5"},"name":"limit","label":"limit","varType":"script","category":"vaVars"},"77e1430e8ae54995add8c92d1578d83d":{"id":"77e1430e8ae54995add8c92d1578d83d","value":{"mode":"simple","value":"0"},"name":"incident_count","label":"incident_count","varType":"script","category":"vaVars"},"77eb8ca1de3e49fca6bc37d7b49b2eeb":{"id":"77eb8ca1de3e49fca6bc37d7b49b2eeb","value":{"mode":"simple","value":"0"},"name":"requested_item_count","label":"requested_item_count","varType":"script","category":"vaVars"},"dbec2ac52b6144598b05746347a3a3bb":{"id":"dbec2ac52b6144598b05746347a3a3bb","value":{"mode":"script","value":"(function execute() {\n    return gs.getProperty('sn_itsm_va.com.snc.itsm.virtualagent.portal_url', 'sp');\n})()\n"},"name":"service_portal_base_url","label":"service_portal_base_url","varType":"script","category":"vaVars"},"7b1771c382304cadae4a3aa95a114e0d":{"id":"7b1771c382304cadae4a3aa95a114e0d","value":{"mode":"script","value":"(function execute() {\n    return gs.getProperty('glide.servlet.uri') + '/';\n})()\n"},"name":"base_url","label":"base_url","varType":"script","category":"vaVars"},"38458459b9fc464eba8a9cc0da93b572":{"id":"38458459b9fc464eba8a9cc0da93b572","name":"LiveAgent_application","value":{"mode":"simple","value":"itsm"},"varType":"script","label":"LiveAgent_application","category":"vaVars"},"5d085c415cbd49bc8295be6a60095208":{"id":"5d085c415cbd49bc8295be6a60095208","value":{"value":"","mode":"simple"},"name":"table_name","label":"table_name","varType":"script","category":"vaVars"},"25c473d4f9e2470cb2ca6dfd0a322b49":{"id":"25c473d4f9e2470cb2ca6dfd0a322b49","value":{"mode":"simple","value":"0"},"name":"count","label":"count","varType":"script","category":"vaVars"},"bebac1df4d754177bc12f77fdafd2146":{"id":"bebac1df4d754177bc12f77fdafd2146","value":{"value":"","mode":"simple"},"name":"sys_id","label":"sys_id","varType":"script","category":"vaVars"},"8a338bdac737486eb625a78e7b71bc59":{"category":"vaInputs","id":"8a338bdac737486eb625a78e7b71bc59","label":"User","name":"user","table":"sys_user","varType":"reference"}},"goals":{"primary":{"id":"primary","trigger":{"type":"primary"},"name":"primary","applicability":"","description":"","nodes":{"eaadb07035ce412795a9cee3b8ed09d3":{"id":"eaadb07035ce412795a9cee3b8ed09d3","stepType":"Start","name":"Start","greetingResponse":{"mode":"simple","value":""},"applicability":{"mode":"query","value":""}},"ce6e898ac8244c04991b300e7d494ba8":{"id":"ce6e898ac8244c04991b300e7d494ba8","stepType":"TerminateGoal","name":"End","confirmationMessage":{"value":"","mode":"simple"},"applicability":{"mode":"query","value":""}},"78e72913f7a64accacbb1535067eb783":{"id":"78e72913f7a64accacbb1535067eb783","name":"Check Incidents and Requested Items","script":"(function execute() {\n    /*\n        Determining whether there are,\n        1. Active incidents opened by the current user\n        2. Active Requested items requested for the current user\n        and assigning the corresponding script variables.\n    */\n\n    // Setting the incident count\n    var incidents = new GlideAggregate('incident');\n    incidents.addQuery('active', true);\n    incidents.addQuery('caller_id', vaInputs.user);\n    incidents.addAggregate('COUNT');\n    incidents.query();\n    var incidentCount = 0;\n    if (incidents.next())\n        incidentCount = incidents.getAggregate('COUNT');\n        \n    vaVars.incident_count = incidentCount;\n\n    // Setting the requested items count\n    var reqItems = new GlideAggregate('sc_req_item');\n    reqItems.addQuery('active', true);\n    reqItems.addQuery('request.requested_for', vaInputs.user);\n    reqItems.addAggregate('COUNT');\n    reqItems.query();\n    var reqItemsCount = 0;\n    if (reqItems.next())\n        reqItemsCount = reqItems.getAggregate('COUNT');\n\n    vaVars.requested_item_count = reqItemsCount;\n})()\n","stepType":"ScriptAction","applicability":{"mode":"query","value":""}},"8e5bc29adf8f4902bfaa04d9644f1dff":{"id":"8e5bc29adf8f4902bfaa04d9644f1dff","stepType":"Decision","name":"Records  Decision","applicability":{"mode":"query","value":""}},"e1282008e57441dc925b089793b7090d":{"stepType":"ReferenceChoicePrompt","name":"Get Record","prompt":{"value":"(function execute() {\n    if (vaVars.table_name == 'incident') {\n        if (parseInt(vaVars.incident_count) &gt; parseInt(vaVars.limit)) \n            return gs.getMessage('You have {0} incidents:', vaVars.incident_count);\n        else\n            return gs.getMessage('Here are your incidents:');\n    }\n\n    if (parseInt(vaVars.requested_item_count) &gt; parseInt(vaVars.limit)) \n        return gs.getMessage('You have {0} requested items:', vaVars.requested_item_count);\n    return gs.getMessage('Here are your requested items:');\n})()\n","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"query","value":""},"optional":false,"defaultValue":{"value":"","mode":"simple"},"variableId":"b52bca8ded0e49fd9037b5a9f8969b1e","id":"e1282008e57441dc925b089793b7090d","mode":"external","script":"(function execute() {\n    /*\n        1. Query the requested items table and get all the active items requested_for the user\n        2. Show the recently updated 5(limit) requested items, apply pagination if there are more than 5.\n    */\n\n\n    var count = 0;\n\n    var options = [];    \n    var gr = new GlideRecord(vaVars.table_name);\n    gr.addActiveQuery();\n    if (vaVars.table_name == 'incident')\n        gr.addQuery('caller_id', vaInputs.user);\n    else \n        gr.addQuery('request.requested_for', vaInputs.user);\n\n    gr.orderByDesc('sys_updated_on');\n    gr.query();\n\n    count = gr.getRowCount();\n    vaVars.count = count;\n    var cnt = 0;\n\n    while(gr.next()) {\n        if (gr.canRead()) {\n            if (vaVars.table_name == 'incident')\n                options.push({ 'value': gr.getUniqueValue(), 'label': gr.getDisplayValue('short_description') + ' [' + gr.getValue('number') + ']'});\n            else\n                options.push({ 'value': gr.getUniqueValue(), 'label': gr.getDisplayValue('cat_item')  + ' [' + gr.getValue('number') + ']'});\n            cnt++;\n        } \n    }\n\n        \n    return options;\n})()","noRecordsResponseMsg":{"mode":"simple","value":[{"type":"paragraph","children":[{"text":""},{"text":"No Records Found"},{"text":""}]}]},"condition":{"value":"(function execute() {\n    /*\n        1. Query the requested items table and get all the active items requested_for the user\n        2. Show the recently updated 5(limit) requested items, apply pagination if there are more than 5.\n    */\n\n\n    var count = 0;\n\n    var options = [];    \n    var gr = new GlideRecord(vaVars.table_name);\n    gr.addActiveQuery();\n    if (vaVars.table_name == 'incident')\n        gr.addQuery('caller_id', vaInputs.user);\n    else \n        gr.addQuery('request.requested_for', vaInputs.user);\n\n    gr.orderByDesc('sys_updated_on');\n    gr.query();\n\n    count = gr.getRowCount();\n    vaVars.count = count;\n    var cnt = 0;\n\n    while(gr.next()) {\n        if (gr.canRead()) {\n            if (vaVars.table_name == 'incident')\n                options.push({ 'value': gr.getUniqueValue(), 'label': gr.getDisplayValue('short_description') + ' [' + gr.getValue('number') + ']'});\n            else\n                options.push({ 'value': gr.getUniqueValue(), 'label': gr.getDisplayValue('cat_item')  + ' [' + gr.getValue('number') + ']'});\n            cnt++;\n        } \n    }\n\n        \n    return options;\n})()","mode":"external_script"},"table":"sc_req_item","withNluUserInput":true,"skipIfFulfilled":true,"entity":{"id":""},"skippable":{"value":"","mode":"query"},"metadataScript":""},"df326c1d80974ffbb2bf7a4c2c56bdc2":{"stepType":"ChoicePrompt","name":"Incident or Requested Item","prompt":{"value":"(function execute() {\n    var output = '';\n    var incidents = '';\n    var items = '';\n\n    if (vaVars.incident_count != 1) {\n            incidents = gs.getMessage('{0} open incidents',vaVars.incident_count);\n    } else {\n            incidents = gs.getMessage('{0} open incident', vaVars.incident_count);\n    }\n\n    if (vaVars.requested_item_count != 1) {\n            items = gs.getMessage('{0} requested items', vaVars.requested_item_count);\n    } else {\n            items = gs.getMessage('{0} requested item', vaVars.requested_item_count);\n    }\n\n    return gs.getMessage('I just checked and you have {0} and {1}.  Which status would you like to check?', [incidents,items]);\n})()\n","mode":"script"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"query","value":""},"optional":false,"defaultValue":{"value":"","mode":"simple"},"variableId":"530ef78d4f4c41e1bc620e8c43f2bdf0","id":"df326c1d80974ffbb2bf7a4c2c56bdc2","withNluUserInput":true,"skipIfFulfilled":true,"entity":{"id":""},"skippable":{"value":"","mode":"query"}},"715c22072f6f411baa0cf613abae1c8b":{"id":"715c22072f6f411baa0cf613abae1c8b","stepType":"TextOutput","name":"No Incidents or Requested Items","value":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"You have no active incidents or requested items."},{"text":""}]}],"mode":"simple"},"applicability":{"mode":"query","value":""},"secure":false},"544383042f6045b0985d3a4a9293cfb8":{"id":"544383042f6045b0985d3a4a9293cfb8","stepType":"Prompt","name":"Add Comment","prompt":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"Would you like to add a comment?"},{"text":""}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"query","value":""},"optional":false,"defaultValue":{"value":"","mode":"simple"},"variableId":"45e4d90b4ca04474bf4745dfd7a6ba72","withNluUserInput":false,"skipIfFulfilled":false,"entity":{"id":""},"skippable":{"value":"","mode":"query"}},"1288d61d26c7432ca31a0d6de135801d":{"id":"1288d61d26c7432ca31a0d6de135801d","stepType":"Decision","name":"Add Comment Decision","applicability":{"mode":"query","value":""}},"e370d10271d847a596ed3656e4b2f759":{"id":"e370d10271d847a596ed3656e4b2f759","stepType":"Prompt","name":"Comment","prompt":{"value":[{"type":"paragraph","children":[{"text":""},{"text":"Please enter your comment."},{"text":""}]}],"mode":"simple"},"confirmMessage":{"value":"","mode":"simple"},"acknowledgeMsg":{"value":"","mode":"simple"},"applicability":{"mode":"query","value":""},"optional":false,"defaultValue":{"value":"","mode":"simple"},"variableId":"eb18fa5bb6dd4171be1831c5c7de0c78","withNluUserInput":false,"skipIfFulfilled":false,"entity":{"id":""},"skippable":{"value":"","mode":"query"},"inputType":{"format":"Text","script":""}},"e979ab803cb047629696c6492b4bb140":{"id":"e979ab803cb047629696c6492b4bb140","stepType":"Decision","name":"Count Decision","applicability":{"mode":"query","value":""}},"8f89392a41d94c02ab3d37c235a4cadd":{"id":"8f89392a41d94c02ab3d37c235a4cadd","stepType":"ScriptOutput","name":"Update Record","output_type":"single_part","script":"(function execute() {\n    var response = '';\n    var gr = new GlideRecordSecure(vaVars.table_name);\n    if (gr.get(vaVars.sys_id)) {\n        var comment = vaInputs.comment.getValue().trim();\n        if (comment) {\n            gr.comments = comment;\n            gr.update();\n            if (vaVars.table_name == 'incident')\n                response = gs.getMessage(\"I've updated the incident.\");\n            else\n                response = gs.getMessage(\"I've updated the requested item.\");  \n        } else {\n            response = gs.getMessage(\"OK, no comment will be added.\");\n        }\n    } else\n        response = gs.getMessage(\"I couldn't find the record.\");\n\n    return response;\n})()","applicability":{"mode":"query","value":""}},"3015679069124dde9fbae8d2838743d6":{"id":"3015679069124dde9fbae8d2838743d6","stepType":"Decision","name":"Decision","applicability":{"mode":"query","value":""}},"06514cffe9914769bda221176697150d":{"id":"06514cffe9914769bda221176697150d","name":"Set Incident Table","script":"(function execute() {\n    vaVars.table_name = 'incident';\n    vaVars.count = vaVars.incident_count;\n})()\n","stepType":"ScriptAction","applicability":{"mode":"query","value":""}},"d56be27797a54f4db0121d8e9d3ea6a0":{"id":"d56be27797a54f4db0121d8e9d3ea6a0","name":"Set Requested Item table","script":"(function execute() {\n    vaVars.table_name = 'sc_req_item';\n    vaVars.count = vaVars.requested_item_count;\n})()\n","stepType":"ScriptAction","applicability":{"mode":"query","value":""}},"55be471f71ff4dc79375716c85eced43":{"id":"55be471f71ff4dc79375716c85eced43","name":"Set Table","script":"(function execute() {\n    vaVars.table_name = vaInputs.incident_or_requested_item;\n    if (vaVars.table_name == 'incident')\n        vaVars.count = vaVars.incident_count;\n    else \n        vaVars.count = vaVars.requested_item_count;\n})()\n","stepType":"ScriptAction","applicability":{"mode":"query","value":""}},"de4d398ff8df4f608f6c98f16e19ebb9":{"id":"de4d398ff8df4f608f6c98f16e19ebb9","name":"Set Sys Id","script":"(function execute() {\n    vaVars.sys_id = vaInputs.get_record.getValue();\n})()\n","stepType":"ScriptAction","applicability":{"mode":"query","value":""}},"9e8537add828481ea6161558392854fe":{"id":"9e8537add828481ea6161558392854fe","name":"Set Sys Id","script":"(function execute() {\n    // Query the requested item table and get the only requested item\n      var gr = new GlideRecord(vaVars.table_name);\n      gr.addQuery('active', true);\n      if (vaVars.table_name == 'incident')\n            gr.addQuery('caller_id', vaInputs.user);\n      else \n            gr.addQuery('request.requested_for', vaInputs.user);\n\n      gr.setLimit(1);\n      gr.query();\n      if (gr.next()) {\n          vaVars.sys_id = gr.getUniqueValue();\n      }\n})()\n","stepType":"ScriptAction","applicability":{"mode":"query","value":""}},"c3817bff48a747eabbf10b306f647296":{"id":"c3817bff48a747eabbf10b306f647296","stepType":"TextOutput","name":"Before Card","value":{"value":"(function execute() {\n    if (vaVars.table_name == 'incident') {\n        if (parseInt(vaVars.count) == 1)\n            return gs.getMessage('OK, here is your incident:');\n        return gs.getMessage('Here is your incident:');\n    }\n    if (parseInt(vaVars.count) == 1)\n        return gs.getMessage('OK, here is your requested item:');\n    return gs.getMessage('Here is your requested item:');\n})()\n","mode":"script"},"applicability":{"mode":"query","value":""},"secure":false},"051c0451c61d45bb84d861cd582b0a14":{"id":"051c0451c61d45bb84d861cd582b0a14","stepType":"Decision","name":"Decision","applicability":{"mode":"query","value":""}},"95c5742b844645d48e7565c25e043646":{"id":"95c5742b844645d48e7565c25e043646","stepType":"RecordOutput","name":"Incident card","variableId":"","mode":"script","tableName":"incident","fields":["short_description","state","assigned_to","sys_updated_on","comments"],"applicability":{"value":"","mode":"query"},"condition":{"mode":"glide_query","value":"sys_id={{vaVars.sys_id}}"},"cardTemplate":"General","cardFields":{},"cardDefinition":{}},"eb397458960a4f6eae64d999dda8d61c":{"id":"eb397458960a4f6eae64d999dda8d61c","stepType":"RecordOutput","name":"Requested Item card","variableId":"","mode":"script","tableName":"sc_req_item","fields":["cat_item","state","assigned_to","sys_updated_on","comments"],"applicability":{"value":"","mode":"query"},"condition":{"mode":"glide_query","value":"sys_id={{vaVars.sys_id}}"},"cardTemplate":"General","cardFields":{},"cardDefinition":{}}},"edges":[{"id":"e2ac5e92a28a4e23866f3e5d8170657f","edgeType":"Edge","source":"e1282008e57441dc925b089793b7090d","target":"de4d398ff8df4f608f6c98f16e19ebb9","sourcePort":"","targetPort":""},{"id":"e51b22575dc740de8d9e40e5a0cebadc","edgeType":"Edge","source":"95c5742b844645d48e7565c25e043646","target":"544383042f6045b0985d3a4a9293cfb8","sourcePort":"","targetPort":""},{"id":"be9c001cfe7540d389c75d9412be4530","edgeType":"Branch","source":"1288d61d26c7432ca31a0d6de135801d","target":"ce6e898ac8244c04991b300e7d494ba8","sourcePort":"","targetPort":"","expression":{"mode":"query","value":"add_comment="},"label":"No"},{"id":"1fcc25b454234953b86bcf1f2d3e29e0","edgeType":"Branch","source":"3015679069124dde9fbae8d2838743d6","target":"8e5bc29adf8f4902bfaa04d9644f1dff","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return parseInt(vaVars.incident_count) != 0 || parseInt(vaVars.requested_item_count) != 0;\n})()\n"},"label":"Has Records"},{"id":"d37b2a1beb434e6b9a48aad2d7f617e8","edgeType":"Edge","source":"06514cffe9914769bda221176697150d","target":"e979ab803cb047629696c6492b4bb140","sourcePort":"","targetPort":""},{"id":"d6b226575bfc432ea15b9b5c4d9dfc40","edgeType":"Edge","source":"de4d398ff8df4f608f6c98f16e19ebb9","target":"c3817bff48a747eabbf10b306f647296","sourcePort":"","targetPort":""},{"id":"071683583ad543c68a545e5b4696f487","edgeType":"Edge","source":"55be471f71ff4dc79375716c85eced43","target":"e979ab803cb047629696c6492b4bb140","sourcePort":"","targetPort":""},{"id":"0d96dab9836d4e5a958f242ea5056a7d","edgeType":"Edge","source":"8f89392a41d94c02ab3d37c235a4cadd","target":"ce6e898ac8244c04991b300e7d494ba8","sourcePort":"","targetPort":""},{"id":"aaa7e90d70e649108587e241875ac7cd","edgeType":"Edge","source":"eaadb07035ce412795a9cee3b8ed09d3","target":"78e72913f7a64accacbb1535067eb783","sourcePort":"","targetPort":""},{"id":"156965d5be6a42a399da3408899136b5","edgeType":"Branch","source":"8e5bc29adf8f4902bfaa04d9644f1dff","target":"df326c1d80974ffbb2bf7a4c2c56bdc2","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.incident_count != 0 &amp;&amp; vaVars.requested_item_count != 0;\n})()"},"label":"Both Incidents and Requested Items"},{"id":"b24e0aed991745e6b9ac38f17e891d21","edgeType":"Edge","source":"715c22072f6f411baa0cf613abae1c8b","target":"ce6e898ac8244c04991b300e7d494ba8","sourcePort":"","targetPort":""},{"id":"eaec7834d7b448c0bc9f0ec8e1624cfd","edgeType":"Edge","source":"544383042f6045b0985d3a4a9293cfb8","target":"1288d61d26c7432ca31a0d6de135801d","sourcePort":"","targetPort":""},{"id":"709e35245ccc43fd8a2e209d666c85c7","edgeType":"Branch","source":"1288d61d26c7432ca31a0d6de135801d","target":"e370d10271d847a596ed3656e4b2f759","sourcePort":"","targetPort":"","expression":{"mode":"query","value":"add_comment=true"},"label":"Yes"},{"id":"9af0eae9df2e4714be122fc35ceac5fd","edgeType":"Branch","source":"e979ab803cb047629696c6492b4bb140","target":"e1282008e57441dc925b089793b7090d","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.count &gt; 1;\n})()"},"label":"Multiple Records"},{"id":"94860887bcee440a8918f60068517262","edgeType":"Edge","source":"e370d10271d847a596ed3656e4b2f759","target":"8f89392a41d94c02ab3d37c235a4cadd","sourcePort":"","targetPort":""},{"id":"a3f30b6c0abc4078862337f57c312777","edgeType":"Edge","source":"78e72913f7a64accacbb1535067eb783","target":"3015679069124dde9fbae8d2838743d6","sourcePort":"","targetPort":""},{"id":"7add209688b54680bf3cb073735fdeac","edgeType":"Branch","source":"3015679069124dde9fbae8d2838743d6","target":"715c22072f6f411baa0cf613abae1c8b","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return parseInt(vaVars.incident_count) == 0 &amp;&amp; parseInt(vaVars.requested_item_count) == 0;\n})()\n"},"label":"Neither Incidents nor Requested Items"},{"id":"16ca74a977bc4fe48fb0556b3515e78a","edgeType":"Branch","source":"8e5bc29adf8f4902bfaa04d9644f1dff","target":"06514cffe9914769bda221176697150d","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return parseInt(vaVars.incident_count) &gt; 0 &amp;&amp; parseInt(vaVars.requested_item_count) == 0;\n})()"},"label":"Incidents only"},{"id":"bd4e2abad10546538dd19c960b47d9bf","edgeType":"Branch","source":"8e5bc29adf8f4902bfaa04d9644f1dff","target":"d56be27797a54f4db0121d8e9d3ea6a0","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return parseInt(vaVars.requested_item_count) &gt; 0 &amp;&amp; parseInt(vaVars.incident_count) == 0;\n})()\n"},"label":"Requested Items Only"},{"id":"dcc586e1bbfa4fe287a10b08aa5bc4a4","edgeType":"Edge","source":"d56be27797a54f4db0121d8e9d3ea6a0","target":"e979ab803cb047629696c6492b4bb140","sourcePort":"","targetPort":""},{"id":"0f73a9cf8e0a46a0bacfa0ca9f17bdfe","edgeType":"Edge","source":"df326c1d80974ffbb2bf7a4c2c56bdc2","target":"55be471f71ff4dc79375716c85eced43","sourcePort":"","targetPort":""},{"id":"d7dc09c175c34628b468f23552d181fc","edgeType":"Branch","source":"e979ab803cb047629696c6492b4bb140","target":"9e8537add828481ea6161558392854fe","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return parseInt(vaVars.count) == 1;\n})()"},"label":"Only One Record"},{"id":"59390d6e73ff4025ae0ab95df67236b1","edgeType":"Edge","source":"9e8537add828481ea6161558392854fe","target":"c3817bff48a747eabbf10b306f647296","sourcePort":"","targetPort":""},{"id":"8983b8235161466da9b4f1c4e22c3ba4","edgeType":"Edge","source":"c3817bff48a747eabbf10b306f647296","target":"051c0451c61d45bb84d861cd582b0a14","sourcePort":"","targetPort":""},{"id":"30e1755d6fc34f459ce9975302e082c6","edgeType":"Branch","source":"051c0451c61d45bb84d861cd582b0a14","target":"95c5742b844645d48e7565c25e043646","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.table_name == 'incident';\n})()\n"},"label":"Incident"},{"id":"3d798a34af144a46b75b00ba9bacc68b","edgeType":"Branch","source":"051c0451c61d45bb84d861cd582b0a14","target":"eb397458960a4f6eae64d999dda8d61c","sourcePort":"","targetPort":"","expression":{"mode":"script","value":"(function execute() {\n    return vaVars.table_name == 'sc_req_item';\n})()\n"},"label":"Requested Item"},{"id":"c8728178ad0f4933ba69a89a75e526d6","edgeType":"Edge","source":"eb397458960a4f6eae64d999dda8d61c","target":"544383042f6045b0985d3a4a9293cfb8","sourcePort":"","targetPort":""}]}}}</graph><key_phrases>Check IT Ticket Status III,Check IT Ticket Status II,ticket status,latest,update,check,status,Request,Requested Item,Incident</key_phrases><library>false</library><live_agent>false</live_agent><name>Check IT Ticket Status III</name><nlu_intent/><nlu_intent_label/><nlu_model/><nlu_model_label/><nlu_provider/><roles/><source_topic_id>edca6f10dbce20101d775385ca9619e4</source_topic_id><sys_class_name>sys_cb_topic</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2021-01-28 21:12:35</sys_created_on><sys_domain>global</sys_domain><sys_id>51edb7ecdb0a60101d775385ca961992</sys_id><sys_mod_count>0</sys_mod_count><sys_name>Check IT Ticket Status III</sys_name><sys_package display_value="NeedIt Virtual Agent Conversations" source="x_544290_needit_vi">85b3c76cdbc660101d775385ca961932</sys_package><sys_policy/><sys_scope display_value="NeedIt Virtual Agent Conversations">85b3c76cdbc660101d775385ca961932</sys_scope><sys_update_name>sys_cb_topic_51edb7ecdb0a60101d775385ca961992</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2021-01-28 21:12:35</sys_updated_on><triggerable_by_notification>false</triggerable_by_notification><type>STANDARD</type><variables/></sys_cb_topic><sys_variable_value action="delete_multiple" query="document_key=51edb7ecdb0a60101d775385ca961992"/></record_update>]]></payload>
        <payload_hash>-1241261237</payload_hash>
        <record_name>Check IT Ticket Status III</record_name>
        <reverted_from/>
        <source>01b3c76cdbc660101d775385ca961935</source>
        <source_table>sys_update_set</source_table>
        <state>previous</state>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-01-28 21:12:36</sys_created_on>
        <sys_id>55ed3b24dbca60101d775385ca961920</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_recorded_at>1774ad73da50000001</sys_recorded_at>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-01-28 21:12:36</sys_updated_on>
        <type>Topic</type>
        <update_guid>9ded3b2414ca6010ecf77b29b1645b1f</update_guid>
        <update_guid_history>9ded3b2414ca6010ecf77b29b1645b1f:-1241261237</update_guid_history>
    </sys_update_version>
    <sys_metadata_delete action="INSERT_OR_UPDATE">
        <sys_audit_delete/>
        <sys_class_name>sys_metadata_delete</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-01-29 09:15:30</sys_created_on>
        <sys_db_object display_value="" name="sys_cb_topic">sys_cb_topic</sys_db_object>
        <sys_id>51de51fd540649d99bda9801ce5f13e9</sys_id>
        <sys_metadata>51edb7ecdb0a60101d775385ca961992</sys_metadata>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Check IT Ticket Status III</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_544290_needit_vi">85b3c76cdbc660101d775385ca961932</sys_package>
        <sys_parent/>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">85b3c76cdbc660101d775385ca961932</sys_scope>
        <sys_scope_delete display_value="">5a41e90059a04f02a0b960254b5df164</sys_scope_delete>
        <sys_update_name>sys_cb_topic_51edb7ecdb0a60101d775385ca961992</sys_update_name>
        <sys_update_version display_value="sys_cb_topic_51edb7ecdb0a60101d775385ca961992">55ed3b24dbca60101d775385ca961920</sys_update_version>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-01-29 09:15:30</sys_updated_on>
    </sys_metadata_delete>
</record_update>
